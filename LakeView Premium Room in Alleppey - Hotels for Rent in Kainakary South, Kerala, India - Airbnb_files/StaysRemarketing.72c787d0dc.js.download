__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FORMAT_FOR_P5=e.FORMAT_FOR_P3=e.FORMAT_FOR_P2=e.FORMAT_FOR_EXPERIENCES_P5=e.FORMAT_FOR_EXPERIENCES_P4=e.FORMAT_FOR_EXPERIENCES_P3=void 0,e.initRemarketingData=function(p,O,l=!1){if(!u.default.getBootstrap('paid_growth_tracking_data'))return Promise.resolve(s);const E=`/v2/paid_growth_tracking_datas?_format=${p}`,F=`${E}/${(0,n.getBev)()}`,c=o.default.current().id||(0,n.getBev)(),P=`${E}/${c}`;if(l){const _=(0,t.default)(P);if(_)return o.default.isLoggedIn()&&(0,t.default)(F,_,{expires:f}),Promise.resolve(_)}return new Promise((n=>{R().default.post(`/api${E}`,{body:JSON.stringify(O||{})}).then((u=>{const R=(0,_().v4)(),s={...u.paid_growth_tracking_data,event_id:R};return l&&((0,t.default)(P,s,{expires:f}),o.default.isLoggedIn()&&(0,t.default)(F,s,{expires:f})),n(s)})).catch((()=>{n(s)}))}))};var t=babelHelpers.interopRequireDefault(r(d[0]));function _(){const t=r(d[1]);return _=function(){return t},t}var n=r(d[2]),o=babelHelpers.interopRequireDefault(r(d[3])),u=babelHelpers.interopRequireDefault(r(d[4]));function R(){const t=babelHelpers.interopRequireDefault(r(d[5]));return R=function(){return t},t}const f=864e5,s={};e.FORMAT_FOR_P2='for_p2';e.FORMAT_FOR_P3='for_p3';e.FORMAT_FOR_P5='for_p5';e.FORMAT_FOR_EXPERIENCES_P3='for_experiences_p3';e.FORMAT_FOR_EXPERIENCES_P4='for_experiences_p4';e.FORMAT_FOR_EXPERIENCES_P5='for_experiences_p5'}),"1949a1",["1f339e","305dd5","4304c2","06a99e","c235f8","69a7c4"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateP2Remarketing=function({filters:t,listingIds:n=[],geography:s,remarketingIds:u,canonicalLocation:c}){const l=new RegExp("=(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))(&|$)"),_=decodeURIComponent(window.location.href),p=l.test(_);p&&o.default.logEvent({event_name:'urls_with_pii',event_data:{url:_,datadog_key:'paid_growth.urls_with_pii',datadog_tags:'source:p2'}});return v({canonicalLocation:c,categoryTag:t.category_tag||'',checkin:t.checkin||'',checkout:t.checkout||'',topListingIds:Array.isArray(u)&&u.length>0?u.slice(0,10):n.slice(0,10),city:s?s.city:'N/A',state:s?s.state:'N/A',country:s?s.country:'N/A',num_adults:t.adults||1,num_children:t.children||0,num_infants:t.infants||0,filters:t,remarketingIds:u,resultIds:n,urlContainsPII:p})};var t=babelHelpers.interopRequireDefault(r(d[0]));function n(){const t=r(d[1]);return n=function(){return t},t}var s=r(d[2]),o=babelHelpers.interopRequireDefault(r(d[3])),u=babelHelpers.interopRequireDefault(r(d[4])),c=babelHelpers.interopRequireDefault(r(d[5])),l=r(d[6]),_=babelHelpers.interopRequireDefault(r(d[7])),p=r(d[8]),y=babelHelpers.interopRequireWildcard(r(d[9]));function h(){const t=babelHelpers.interopRequireDefault(r(d[10]));return h=function(){return t},t}const f='searchresults',b='optout';function k({canonicalLocation:p,categoryTag:b,checkin:k,checkout:v,topListingIds:I,city:R,state:S,country:L,num_adults:P,num_children:w,num_infants:A,filters:D,remarketingIds:x,resultIds:H,urlContainsPII:N},q){var E;const T=_.default.makeGoogleDynxParams(f,I,k,v);if(T.dynx_pagetype='p2',T.dynx_itemid=(0,l.locationToURLParameter)(p).toLowerCase(),(0,y.pushEventsToDataLayer)([{data:{dynx_params:T,urlContainsPII:N}},{event:'searchListings',data:{user_country:t.default.country(),top_listing_ids:I,city:R,state:S,country:L,num_adults:P,num_children:w,num_infants:A,...q}}]),h().default.post("/api/v2/marketing_event_tracking",{body:JSON.stringify({event_type:'SEARCH_LISTINGS',event_data:{audience_type:q.audience_type,category_tag:b,checkin_date:k,checkout_date:v,city:R,country:L,has_account:_.default.hasAccount().toString(),num_adults:null==P?void 0:P.toString(),num_children:null==w?void 0:w.toString(),num_infants:null==A?void 0:A.toString(),searched_string:D.location,state:S,user_bucket:null===(E=q.user_bucket)||void 0===E?void 0:E.toString()}})}),D.work_trip&&(0,y.default)({event:'workTripSearchListings',data:{user_country:t.default.country()}}),k&&v&&(0,y.default)({event:'searchListingsWithDates',data:{user_country:t.default.country()}}),c.default.getBootstrap('remarketing_jitney_logging'))try{const c=JSON.stringify({...q,city:R,region:S,country:L,user_country:t.default.country(),dynxParams:T});o.default.logJitneyEvent({schema:n().PaidGrowthHomeSearchPixelEvent,event_data:{search_results:(H||[]).map(Number),search_results_str:H||[],remarketing_ids:(x||[]).map(Number),remarketing_ids_str:x||[],subtab:2,device_id:(0,s.getBev)()||'',user_id:u.default.current().id,checkin_date:D.checkin,checkout_date:D.checkout,guests:D.guests||1,adults:D.adults||1,children:D.children,infants:D.infants,pets:D.amenities&&D.amenities.includes(12),instant_book:D.ib,price_min:D.price_min,price_max:D.price_max,room_types:D.room_types?D.room_types.map((t=>'Entire home/apt'===t?3:'Private room'===t?2:'Shared room'===t?1:3)):void 0,beds:D.min_beds,bedrooms:D.min_bedrooms,bathrooms:D.min_bathrooms,amenities:D.amenities,audience_type:q.audience_type,user_bucket:q.user_bucket,custom_data:c}})}catch(t){}}function v(t){return(0,p.initRemarketingData)(p.FORMAT_FOR_P2,{}).then((n=>{n&&n.audience_type!==b&&k(t,n)}))}}),"26b25a",["862e50","af12d7","4304c2","c8b97a","06a99e","c235f8","f4229b","387550","1949a1","c1f92a","69a7c4"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),l=babelHelpers.interopRequireDefault(r(d[1])),o=babelHelpers.interopRequireDefault(r(d[2])),u=babelHelpers.interopRequireDefault(r(d[3])),n=r(d[4]);const s=l.default.format('rails_format'),c='YYYY-MM-DD',f='YYYY-MM-DD';var h={localizedToCriteoDate:l=>l?(0,t.default)(l,s).format('MM/DD/YYYY'):'',localizedToGoogleDate:l=>l?(0,t.default)(l,c,!0).isValid()?l:(0,t.default)(l,s).format(c):'',hasAccount:()=>null!=u.default.current().id||!!(0,o.default)('hli'),makeGoogleDynxParams(t,l,o,u){return{hrental_pagetype:t,hrental_id:l,hrental_startdate:this.localizedToGoogleDate(o),hrental_enddate:this.localizedToGoogleDate(u),has_account:this.hasAccount()}},saveSearchFilters(l){if(!l.checkin||!l.checkout)return;const u=(0,t.default)(l.checkin,f,!0).isValid()?(0,t.default)(l.checkin,f):(0,t.default)(l.checkin,s),c=(0,t.default)(l.checkout,f,!0).isValid()?(0,t.default)(l.checkout,f):(0,t.default)(l.checkout,s),h=l.guests?String(l.guests):'',p=l.adults?String(l.adults):'',D=l.children?String(l.children):'',_=l.infants?String(l.infants):'';let Y=0;if(l.room_types)for(let t=0;t<l.room_types.length;t+=1){const o=l.room_types[t];'Entire home/apt'===o?Y+=1:'Private room'===o?Y+=2:'Shared room'===o&&(Y+=4)}(0,o.default)('lsf',u.format(f).concat(',',c.format(f),',',h,',',p,',',D,',',_,',',String(Y)),{expires:u.diff((0,t.default)(),'days')+1,path:'/',domain:(0,n.getCookieHost)()})}};e.default=h}),"387550",["1772c9","c0752c","e7272f","06a99e","5b85ba"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PaidGrowthHomeSearchPixelEvent=void 0;var o={defaultProps:{schema:'com.airbnb.jitney.event.logging.PaidGrowth:PaidGrowthHomeSearchPixelEvent:4.0.0',event_name:'paidgrowth_home_search_pixel',operation:20},propTypes:{}};e.PaidGrowthHomeSearchPixelEvent=o,o.fullyQualifiedName='PaidGrowth.v4.PaidGrowthHomeSearchPixelEvent'}),"af12d7",[]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=u,e.pushEventsToDataLayer=function(t){t.forEach((t=>u(t)))};var n=babelHelpers.interopRequireDefault(r(d[1])),o=r(d[2]);function u({event:u,data:l={},eventCallback:c,eventTimeout:v}){{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:u,...c&&{eventCallback:()=>{c()}},...v&&{eventTimeout:v},...l});const s=Object.fromEntries(Object.entries(l).map((([t,n])=>[t,String(n)])));n.default.logJitneyEvent({schema:t().GoogleTagManagerDataLayerPushEvent,event_data:{data_layer_event_name:u||'',data_layer_event_data:s}}),(0,o.airdogCount)('gtm.datalayer.push',1,[`event:${u||''}`])}}}),"c1f92a",["cd167e","c8b97a","3e4681"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleTagManagerDataLayerPushEvent=void 0;var o={defaultProps:{schema:'com.airbnb.jitney.event.logging.GoogleTagManager:GoogleTagManagerDataLayerPushEvent:1.0.0',event_name:'googletagmanager_data_layer_push'},propTypes:{}};e.GoogleTagManagerDataLayerPushEvent=o,o.fullyQualifiedName='GoogleTagManager.v1.GoogleTagManagerDataLayerPushEvent'}),"cd167e",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]),n=r(d[1]),c=r(d[2]),s=babelHelpers.interopRequireDefault(r(d[3])),u=r(d[4]),o=r(d[5]),l=r(d[6]);function E(t){switch(t){case u.EXPLORE_TABS.SELECT_HOMES:case u.EXPLORE_TABS.HOMES:case u.EXPLORE_TABS.LUXURY:return'homes';case u.EXPLORE_TABS.EXPERIENCES:case u.EXPLORE_TABS.ADVENTURES:return'experiences';default:return null}}var f=function(u){const{remarketingIds:f,canonicalLocation:p,city:R,state:h,country:_}=u,y=(0,s.default)(),{checkin:P,checkout:S,adults:T,children:k,infants:L,pets:v,category_tag:O}=y,X=(0,t.useRef)(y);X.current=y;const{abort:b,scheduler:A}=(0,o.usePostTaskScheduler)({priority:'background',strategy:'recycle'});return(0,t.useEffect)((()=>{const t=(0,l.getTabFromRefinementPaths)(X.current.refinement_paths),s={city:null!=R?R:void 0,state:null!=h?h:void 0,country:null!=_?_:void 0};return'homes'===E(t)?A.postTask((()=>{(0,n.updateP2Remarketing)({canonicalLocation:p||'',filters:X.current,geography:s,listingIds:[],remarketingIds:f||void 0})})):'experiences'===E(t)&&A.postTask((()=>{(0,c.updateP2RemarketingExperience)({filters:X.current,geography:s})})),b}),[R,_,h,p,P,S,T,k,L,v,O,b,A]),null};e.default=f}),"d31cce",["a27fc3","26b25a","dbc503","f98e43","87916a","53bb4a","1b01f9"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateP2RemarketingExperience=function({filters:t,geography:n}){const{checkin:c,checkout:f,adults:s,children:l,infants:o,refinement_paths:h}=t,p=h&&h[0]||'',y=p.split('/').pop();u({checkin:c||'',checkout:f||'',city:n?n.city:'N/A',state:n?n.state:'N/A',country:n?n.country:'N/A',numOfAdults:s||1,numOfChildren:l||0,numOfInfants:o||0,refinementPath:p,refinement:y})};var t=babelHelpers.interopRequireDefault(r(d[0])),n=babelHelpers.interopRequireDefault(r(d[1]));function u({checkin:u,checkout:c,city:f,state:s,country:l,numOfAdults:o,numOfChildren:h,numOfInfants:p,refinementPath:y,refinement:O}){(0,n.default)({event:'searchExperiences',data:{user_country:t.default.country(),city:f,state:s,country:l,checkin:u,checkout:c,numOfAdults:o,numOfChildren:h,numOfInfants:p,refinementPath:y,refinement:O}}),(u||c)&&(0,n.default)({event:'searchExperiencesWithDates',data:{user_country:t.default.country()}})}}),"dbc503",["862e50","c1f92a"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/stays-search/sections/client/StaysRemarketing/StaysRemarketing.2876cf7664.js.map