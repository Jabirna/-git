__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getExploreIsLeanTreatmentFlag=function(){return!1}}),"0d1817",[]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(){const t=r(d[0]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.ClientNormalizeSearchPaths=function({redirectUrl:l}){var s;const u=(0,p.useLocation)();return l=null!==(s=l)&&void 0!==s?s:S(u),(0,t.useEffect)((()=>{if(null!=l){const t=(0,n().parsePath)(l);(0,E.replaceToHistory)(t.pathname,{params:(0,c.default)(t.search)})}}),[l]),null},e.getRedirectUrl=S;var t=r(d[1]),l=r(d[2]),s=r(d[3]),u=r(d[4]),o=r(d[5]),c=babelHelpers.interopRequireDefault(r(d[6])),E=r(d[7]),p=r(d[8]),f=babelHelpers.interopRequireDefault(r(d[9]));function h(n){return n.replace(/^\/s\/[^/]+\/(homes|experiences)/,'/s/:location/$1')}function S(n){var t;const E=(0,l.selectFiltersFromURL)({pathname:n.pathname,queryString:n.search}),p=(E||{}).refinement_paths,S=(0,s.getTabFromRefinementPaths)(p),R={tabId:S,basePath:o.SEARCH_ENDPOINT};let _=n.search;const O=(0,c.default)(_),P=(0,u.makeSearchPath)(E,R);if(![o.EXPLORE_TABS.HOMES,o.EXPLORE_TABS.EXPERIENCES].includes(S))return S===o.EXPLORE_TABS.ADVENTURES||S===o.EXPLORE_TABS.SELECT_HOMES?(_=decodeURIComponent((0,u.makeQueryStrings)(O,R)),`${P}${_}`):'/';if(null!==(t=null==p?void 0:p.some((n=>'string'==typeof n&&n.startsWith('/playlists'))))&&void 0!==t&&t)return'/';const T=null==p?void 0:p[0];if((0,u.isOnlineExperiences)(E,null!=S?S:o.EXPLORE_TABS.HOMES)&&null!=O.refinement_paths&&'/experiences'!==T&&!(0,u.isOnlineExperiencesSearchRefinementPath)(E))return _=decodeURIComponent((0,u.makeQueryStrings)((0,f.default)(O,['refinement_paths']),R)),`${P}${_}`;if((0,u.isOnlineExperiences)(E,null!=S?S:o.EXPLORE_TABS.HOMES)&&(null!=E.location||null!=E.query||null!=E.place_id))return _=decodeURIComponent((0,u.makeQueryStrings)((0,f.default)(O,['location','query','place_id']),R)),`${P}${_}`;return h(n.pathname)!==h(P)?`${P}${_}`:null}}),"0ef88a",["d69748","a27fc3","3d44ce","1b01f9","f4229b","87916a","a7c4ef","4ee5a9","1e300f","3d4f9e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return t.default.get('exploreTreatments')||[]};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"23c701",["0a58da"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(n){return null==n?[]:Array.isArray(n)?n.flatMap(t):'string'==typeof n?[n]:[JSON.stringify(n)]}Object.defineProperty(e,"__esModule",{value:!0}),e.convertToRawParams=function(n){const s=[];return Object.keys(n).forEach((o=>{const u=t(n[o]);s.push({filterName:o,filterValues:u})})),s}}),"294886",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o,e.replaceToHistory=function(t,s={}){o((0,n.getHistory)(),t,s)};var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]);function o(n,o,{maintainScrollPosition:s=!1,maintainQueryParams:l=!1,maintainHash:u=!1,params:c,state:f}={}){const p=(0,t.default)(o,{maintainQueryParams:l,maintainHash:u,params:c});n.replace(p,f),g.window&&!s&&g.window.scrollTo(0,0)}}),"4ee5a9",["be6a20","7934b6"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(l=[]){const n=l.map((({treatmentFlag:t})=>t)).filter(t.default).flat(1);return[...new Set(n)]};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"6e1627",["f30bc0"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.manageTreatmentFlagsWithUpfrontPricingFlag=function(t){let n=t;const u=!!o.default.current().enable_upfront_pricing;u||(n=t.filter((t=>t!==H)));u&&!t.includes(H)&&(n=[...t,H]);return n.filter(h.default)},e.maybeRemoveUpfrontPricingParamsFromUrl=function(){requestIdleCallback((()=>{const t=o.default.current().enable_upfront_pricing;void 0!==t&&(0,p.airdogCount)('search.upfront_pricing.access_with_cookie',1,`value: ${t}`)}));(0,l.default)()[R]&&(0,c.getHistory)().replace(w())},e.setEnableUpfrontPricing=async function(t){return await(f.default.getBootstrap('api_web_client_migration.fejax.enabled')&&!f.default.getBootstrap('api_web_client_migration.fejax.pricing_guest.kill_switch')?(0,b().logMigration)(_().default.get("/_/core-guest-loop/upfront-pricing",{searchParams:{enable_upfront_pricing:t?'true':'false'}}),{method:'GET',client:'niobe',migrationId:'pricing_guest',group:'fejax'}):(0,b().logMigration)(u.default.ajax("/_/core-guest-loop/upfront-pricing?enable_upfront_pricing="+(t?'true':'false'),{dataType:'json',processResponse:!1}),{method:'GET',client:'fejax',migrationId:'pricing_guest',group:'fejax'})),o.default.setCurrent({...o.default.current(),enable_upfront_pricing:t}),Promise.resolve()},e.shouldShowUpfrontPricingBanner=function(){if(f.default.getBootstrap('pricing_upfront_pricing_2022_toggle_killswitch'))return!1;if(E())return!1;return!0};var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]),o=babelHelpers.interopRequireDefault(r(d[2])),u=babelHelpers.interopRequireDefault(r(d[3])),l=babelHelpers.interopRequireDefault(r(d[4])),c=r(d[5]),f=babelHelpers.interopRequireDefault(r(d[6])),p=r(d[7]),s=r(d[8]);function _(){const t=babelHelpers.interopRequireDefault(r(d[9]));return _=function(){return t},t}function b(){const t=r(d[10]);return b=function(){return t},t}var h=babelHelpers.interopRequireDefault(r(d[11]));const R='enable_upfront_pricing',H='upfront_pricing_enabled',I=['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE','GB','IS','LI','NO','AU','KR','CH','HU','CA','IL','CN','NZ'];function w(){const t=(0,l.default)(),{pathname:o,hash:u}=window.location,c={...t};delete c[R];return`${o}?${(0,n.stringify)(c)}${u}`}function E(){return!!(I.includes(t.default.country())||I.includes(t.default.tld_country())||(0,s.isInChinaFlow)())}}),"74d137",["862e50","e950a3","06a99e","c3984f","a7c4ef","7934b6","c235f8","3e4681","b7eb08","69a7c4","7c530a","f30bc0"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logMigration=function(u,c){return Promise.resolve(u).then((()=>n({...c,result:'success'}))).catch((u=>{n({...c,result:'error',responseStatus:null==u?void 0:u.status,noError:!u}),s.default.getBootstrap('niobe.rest.error_logging.kill_switch')||!u||u.status&&200!==u.status||((0,t.airdogCount)('rest_migration.debug',1,{...c,responseStatus:u.status,responseStatusText:u.statusText,message:u.message||'',name:u.name||''}),(0,o().reportNiobeError)(u,{fingerprint:['niobe'],tags:{...c}}))})).catch((()=>{})),u};var t=r(d[0]),s=babelHelpers.interopRequireDefault(r(d[1]));function o(){const t=r(d[2]);return o=function(){return t},t}function n(s){(0,t.airdogCount)('rest_migration.request',1,s)}}),"7c530a",["3e4681","c235f8","8e002d"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.feedMapDecouplingHomepageWebPreSSR=function(u){return!(null==u||!u.includes(n))},e.feedMapDecouplingM11WebPreSSR=function(n,_){return!t(n)&&!(null==_||!_.includes(u))},e.isP2_5=t;const n='feed_map_decouple_homepage_treatment',u='feed_map_decouple_m11_treatment';function t(n){return null!=n.omni_page_id&&null!=n.dynamic_product_ids}}),"88c0d4",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clearGlobalRehydrationCache=function(){const t=o();t.searchResults=null,t.mapSearchResults=null},e.getGlobalRehydrationCache=o,e.getRehydratableListingIds=function({searchResults:t,mapSearchResults:n}){var u;if(!(null!=t&&0!==(null==t?void 0:t.length)||null!=n&&0!==(null==n?void 0:n.length)))return s;const o=new Set,c=null===(u=[...t||[],...n||[]])||void 0===u?void 0:u.map((t=>{var l,n;'ExploreSplitStaysListingItem'===t.__typename&&(null==t||null===(l=t.splitStaysListings)||void 0===l||l.forEach((t=>{null!=(null==t?void 0:t.id)&&o.add(t.id)})));return'SkinnyListingItem'===(null==t?void 0:t.__typename)?t.listingId:'StaySearchResult'===(null==t?void 0:t.__typename)?null===(n=t.listing)||void 0===n?void 0:n.id:null})).filter(l.default),h=new Set(c);return o.forEach((t=>h.delete(t))),Array.from(h)},e.getVariablesWithoutRehydrationIDs=function(t){var l,n;if(null==t)return;const s={...t,staysSearchRequest:{...t.staysSearchRequest},staysMapSearchRequestV2:{...t.staysMapSearchRequestV2}};return null==s||(null===(l=s.staysSearchRequest)||void 0===l||delete l.skipHydrationListingIds),null==s||null===(n=s.staysMapSearchRequestV2)||void 0===n||delete n.skipHydrationListingIds,s},e.rehydrateFeedSearchResults=function({searchResultsContainingSkinnyListings:t,previousSearchResults:s,previousMapSearchResults:u}){let o=!0;const h=c(s,u),y=null==t?void 0:t.map((t=>{if('SkinnyListingItem'===t.__typename){if(null==t.listingId)return null;const l=h.get(t.listingId);return null==l?(o=!1,null):l}return t})).filter(l.default);o||(0,n.reportError)(new Error('StaysSearchRoute.rehydrateFeedSearchResults: Could not rehydrate all search results. '));return y},e.rehydrateMapSearchResults=function({mapSearchResultsContainingSkinnyListings:t,previousSearchResults:s,previousMapSearchResults:u}){let o=!0;const h=c(s,u),y=(null==t?void 0:t.map((t=>{if('SkinnyListingItem'===t.__typename){if(null==t.listingId)return null;const l=h.get(t.listingId);return null==l?(o=!1,null):l}return t})).filter(l.default))||null;o||(0,n.reportError)(new Error('StaysSearchRoute.rehydrateMapSearchResults: Could not rehydrate all search results. '));return y};var t=babelHelpers.interopRequireDefault(r(d[0])),l=babelHelpers.interopRequireDefault(r(d[1])),n=r(d[2]);const s=[],u='stays_search_rehydration_cache';function o(){return t.default.setIfMissingThenGet(u,(()=>({searchResults:null,mapSearchResults:null})))}function c(t,l){const n=new Map;return[...t||[],...l||[]].forEach((t=>{var l,s;'StaySearchResult'===(null==t?void 0:t.__typename)&&null!=(null===(l=t.listing)||void 0===l?void 0:l.id)&&n.set(null===(s=t.listing)||void 0===s?void 0:s.id,t)})),n}}),"926f8b",["29c0a5","f30bc0","f2f40f"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,n=(0,t.default)()){return n.find((({experiment:t})=>t===u))};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"9439c5",["23c701"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STAYS_SEARCH_FILTER_KEYS=e.KNOWN_SEARCH_QUERY_PARAMS=void 0;const _=['cursor','autosuggestions_options','max_categories','metadata_only','satori_version','search_type','source','treatment_flags','raw_params'];e.STAYS_SEARCH_FILTER_KEYS=_;const t=[..._,'inst','niobe_test_destinations','zoom'];e.KNOWN_SEARCH_QUERY_PARAMS=t}),"977a9f",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={document:void 0,getDocument:()=>r(d[1])(d[0]).then(babelHelpers.interopRequireWildcard).then((t=>t.default)),name:'StaysSearch',type:'query',operationId:'829b2271de29a4f66bf2cab71a8289781a59fc248596201b6d9fbf72256d89f2',normalizedItemsLocators:[{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"searchResults"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"alertSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsCarouselSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"alertSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsGroupingSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"bottomSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsCarouselSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"bottomSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsGroupingSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"pageTitleSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsCarouselSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"pageTitleSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsGroupingSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"topSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsCarouselSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"topSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsGroupingSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"footerSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsCarouselSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"footerSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsGroupingSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"interleavedSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsCarouselSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"interleavedSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["ConditionalSectionDataContainer","HelpCenterSectionDataContainer","InterleavedSectionDataContainer","MediationSectionDataContainer","SectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsGroupingSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"interleavedSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["InterleavedSectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsCarouselSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"results"},{typeCondition:["StaysSearchResponse"],responseKey:"sectionConfiguration"},{typeCondition:["StaysSearchSectionConfiguration"],responseKey:"interleavedSections"},{typeCondition:["PlacementPerFormFactor"],responseKey:"sections"},{typeCondition:["InterleavedSectionDataContainer"],responseKey:"sectionData"},{typeCondition:["StaysListingsGroupingSection"],responseKey:"listingItems"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]},{keyPath:["id"],itemsLocation:[{typeCondition:["Query"],responseKey:"presentation"},{typeCondition:["RootPresentationContainer"],responseKey:"staysSearch"},{typeCondition:["StaysSearchPresentation"],responseKey:"mapResults"},{typeCondition:["StaysMapSearchResponse"],responseKey:"mapSearchResults"},{typeCondition:["StaySearchResult"],responseKey:"listing"}]}]};e.default=t}),"a06569",["68b1a1","c592d7"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({location:T,cookie:F,loadQuery:D,exploreTreatments:O,getRenderingState:E,customPrepareNiobeData:k,getErf:q,previousPrepareProps:x}){var C,A,M,I,P,H,B;const{isAirlite:N=!1,isBotRequest:U,formFactor:W=o.DEFAULT_FORM_FACTOR}=k||{},w=(0,t.createTaskController)(),L=(0,s.default)(T.search),Q=null==L.search_type||L.search_type===_.SearchType.USER_MAP_MOVE;Q&&(0,n.default)({experimentName:W===o.FORM_FACTOR.WIDE?b:S,exploreTreatments:O,renderingState:E(),getErfServer:q});const j=(0,p.default)(O),G=null==j?void 0:j.includes(W===o.FORM_FACTOR.WIDE?l.staysSearchRehydrationDesktopTreatmentFlag:l.staysSearchRehydrationMoWebTreatmentFlag),V=null==x||null===(C=x.queryRef)||void 0===C||null===(A=C.result)||void 0===A||null===(M=A.data)||void 0===M||null===(I=M.presentation)||void 0===I||null===(P=I.staysSearch)||void 0===P||null===(H=P.results)||void 0===H||null===(B=H.categoryBar)||void 0===B?void 0:B.categoryBarCacheId,z=(0,R.default)({categoryBarCacheId:V,cookie:F,exploreTreatments:O,getRenderingState:E,location:T,formFactor:W,isAirlite:N,previousListingIds:G&&Q?(0,f.getRehydratableListingIds)((0,f.getGlobalRehydrationCache)()):void 0}),J=(0,c.getRedirectUrl)(T);let K=!1;U||(K=!0);(0,u.isP2_5)(L)||(W===o.FORM_FACTOR.WIDE?(0,n.default)({experimentName:v,exploreTreatments:O,renderingState:E(),getErfServer:q}):(0,n.default)({experimentName:h,exploreTreatments:O,renderingState:E(),getErfServer:q}));return{queryRef:D({context:{fetchOptions:{signal:null==w?void 0:w.signal},taskController:w},variables:z,query:y.default,deferrable:K,usePOSTForQuery:!0,skip:null!=J}),showDeferredSkeleton:K,redirectUrl:J}};var t=r(d[0]),l=r(d[1]),o=r(d[2]),n=babelHelpers.interopRequireDefault(r(d[3])),s=babelHelpers.interopRequireDefault(r(d[4])),u=r(d[5]),c=r(d[6]),p=babelHelpers.interopRequireDefault(r(d[7])),_=r(d[8]),f=r(d[9]),R=babelHelpers.interopRequireDefault(r(d[10])),y=babelHelpers.interopRequireDefault(r(d[11]));const v='feed_map_decoupling_m11_desktop',h='feed_map_decoupling_m11_moweb',b='stays_search_rehydration_desktop_v5',S='stays_search_rehydration_moweb_v5'}),"a829bd",["a2c93f","dc5d1d","b679e8","d271b5","a7c4ef","88c0d4","0ef88a","6e1627","6660fd","926f8b","a8e410","a06569"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({categoryBarCacheId:_,exploreTreatments:h,location:F,formFactor:R,isAirlite:T,previousListingIds:A}){const S=(0,n.default)(F.search),{mock:q}=S,b=R===o.FORM_FACTOR.COMPACT,y=f(h),P=(0,l.default)(y),x=(0,t.feedMapDecouplingM11WebPreSSR)(S,P);if(q)return{mockIdentifier:`ExplorePresentation/${q}`,feedMapDecoupleEnabled:x,isLeanTreatment:(0,p.getExploreIsLeanTreatmentFlag)()};let C=(0,s.selectFiltersForRequest)({location:F,cdnCacheSafe:!1,cdnExperiments:void 0,treatmentFlags:(0,c.manageTreatmentFlagsWithUpfrontPricingFlag)(P),isPWA:b,isAirlite:T});_&&['category_change','filter_change'].includes(C.searchType||'')&&(C={...C,categoryBarCacheId:_});const E=A&&(null==A?void 0:A.length)>0?A:void 0,M=(0,u.default)({location:F,requestedPageType:'STAYS_SEARCH',exploreRequest:C,isAirlite:T,skipHydrationListingIds:E}),v=(0,s.selectFiltersForRequest)({location:F,cdnCacheSafe:!1,cdnExperiments:void 0,treatmentFlags:(0,c.manageTreatmentFlagsWithUpfrontPricingFlag)(P),isPWA:b,isAirlite:T,isMapRequest:!0}),I=(0,u.default)({location:F,requestedPageType:'STAYS_SEARCH',exploreRequest:v,isAirlite:T,skipHydrationListingIds:E});return{staysSearchRequest:M,...x&&{staysMapSearchRequestV2:I},feedMapDecoupleEnabled:x,isLeanTreatment:(0,p.getExploreIsLeanTreatmentFlag)()}};var t=r(d[0]),n=babelHelpers.interopRequireDefault(r(d[1])),l=babelHelpers.interopRequireDefault(r(d[2])),s=r(d[3]),o=r(d[4]),c=r(d[5]),p=r(d[6]),u=babelHelpers.interopRequireDefault(r(d[7]));function f(t){const n=new Set(['feed_map_decouple_homepage_desktop','feed_map_decouple_homepage_moweb']);return null==t?void 0:t.filter((({experiment:t})=>!n.has(t)))}}),"a8e410",["88c0d4","a7c4ef","6e1627","3d44ce","b679e8","74d137","0d1817","e16093"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({experimentName:l,exploreTreatments:u,renderingState:o,getErfServer:s}){const{treatmentName:f,log:p}=(0,n.default)(l,u)||{};f&&'manual'===p&&('server-render'===o?s(l):'client-render'===o&&t.default.logCustomHashing(l,f))};var t=babelHelpers.interopRequireDefault(r(d[0])),n=babelHelpers.interopRequireDefault(r(d[1]))}),"d271b5",["fc0842","9439c5"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.staysSearchRehydrationMoWebTreatmentFlag=e.staysSearchRehydrationDesktopTreatmentFlag=void 0;e.staysSearchRehydrationMoWebTreatmentFlag='stays_search_rehydration_treatment_moweb';e.staysSearchRehydrationDesktopTreatmentFlag='stays_search_rehydration_treatment_desktop'}),"dc5d1d",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getRawParamSingleValue=function(l,t){var n,u;return null!==(n=null===(u=q(l,t))||void 0===u?void 0:u[0])&&void 0!==n?n:null},e.merge=function(l,n,u){const{rawParams:o,...s}=l,{rawParams:c,...f}=n,p=new Set(Object.keys(u||{}).map(t.default)),R={};null==o||o.forEach((({filterName:l,filterValues:t})=>{l&&!p.has(l)&&(R[l]=t)})),null==c||c.forEach((({filterName:l,filterValues:t})=>{l&&(R[l]=t)}));const v=S(Object.entries(R).map((([l,t])=>({filterName:l,filterValues:t}))));return{...s,...f,rawParams:v}},e.selectFiltersFromURL=y,e.selectSearchFiltersForRequest=_;var l=babelHelpers.interopRequireDefault(r(d[0])),t=babelHelpers.interopRequireWildcard(r(d[1])),n=babelHelpers.interopRequireWildcard(r(d[2])),u=babelHelpers.interopRequireDefault(r(d[3])),o=r(d[4]),s=babelHelpers.interopRequireDefault(r(d[5])),c=r(d[6]),f=r(d[7]),p=r(d[8]);function R(u,o){return(0,t.snakeKeysToCamelKeys)((0,l.default)((0,n.coerceCorrectTypes)(u,{forRequest:!0}),o))}function v(t){return(0,l.default)((0,s.default)(t),p.KNOWN_SEARCH_QUERY_PARAMS)}function y({queryString:l}){const t={...v(l)};return{...(0,n.default)({...t})}}function q(l,t){if(null!=l){const n=l.find((l=>(null==l?void 0:l.filterName)===t));if(null!=(null==n?void 0:n.filterValues)&&n.filterValues.length>0)return n.filterValues}return null}function S(l){const t=[...l];return t.sort(((l,t)=>{var n,u;return(null!==(n=null==l?void 0:l.filterName)&&void 0!==n?n:'').localeCompare(null!==(u=null==t?void 0:t.filterName)&&void 0!==u?u:'')})),t}function _({location:n,exploreRequest:s,filterKeys:f,isAirlite:p=!1}){const v=(0,u.default)(s,...f.map(t.default)),q=y({queryString:null==n?void 0:n.search}),_=(0,l.default)((0,o.camelKeysToSnakeKeys)(s),f);return{...R({...q.cursor&&{cursor:q.cursor},...p&&{max_categories:8},..._,raw_params:S((0,c.convertToRawParams)(v))},f)}}var b=function({location:l,exploreRequest:t,requestedPageType:n,isAirlite:u=!1,skipHydrationListingIds:o}){const s={requestedPageType:n,..._({location:l,exploreRequest:t,filterKeys:p.STAYS_SEARCH_FILTER_KEYS,isAirlite:u})};return s.searchType===f.SearchType.USER_MAP_MOVE&&null!=o&&o.length?{...s,skipHydrationListingIds:o}:s};e.default=b}),"e16093",["45db44","fd0757","c6fd31","3d4f9e","2755ca","a7c4ef","294886","6660fd","977a9f"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/stays-search/routes/StaysSearchRoute/StaysSearchRoute.prepare.328ef3bf95.js.map