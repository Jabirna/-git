__d((function(g,r,i,a,m,e,d){"use strict";function t(){const s=r(d[0]);return t=function(){return s},s}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=babelHelpers.interopRequireDefault(r(d[1])),o=r(d[2]),n=r(d[3]);const h='pageName';var l=new class{constructor(){this.history=void 0,this.historyCallback=void 0,this.lastLoggedPathname=void 0,this.unlistenHistory=void 0,this.isClientRouteRequest=!1,this.history=void 0,this.unlistenHistory=void 0,this.historyCallback=void 0,this.lastLoggedPathname=void 0}setHistoryListener(t,s){this.history||(this.history=t,this.unlistenHistory=t.listen(this.onHistoryChange.bind(this)),void 0===this.lastLoggedPathname&&this.history.location&&(this.lastLoggedPathname=this.history.location.pathname)),s&&s!==this.historyCallback&&(this.historyCallback=s)}onHistoryChange(t,s){this.isClientRouteRequest=!0,this.historyCallback&&this.historyCallback(t,s)}logImpression({universalPageName:l,eventData:u,eventDataSchema:c,impressionUuid:v,pageRequestMethod:y}){{const t=document.getElementById(h);t&&t.remove();const s=document.createElement('div');s.setAttribute('data-pageName',l),s.setAttribute('id',h),document.body.appendChild(s)}(0,n.getPageRequestMethod)(this.isClientRouteRequest).then((n=>{const h={schema:t().UniversalPageImpressionEvent,event_data:{page_name:l,referrer:document.referrer||'unknown',page_request_method:y||n,event_data:u,event_data_schema:c,impression_uuid:v,navigation_type:(0,o.getNavigationType)(),url:document.location.href}};s.default.logJitneyEvent(h)}))}hasMovedToNewPage(t,s,o){return'POP'===s||'PUSH'===s||!!o&&'REPLACE'===s&&t.pathname!==this.lastLoggedPathname}};e.default=l}),"007d44",["bf254a","c8b97a","5d602b","6f10f0"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCheckoutMutationVariable=function({input:t,isLeanFragment:n,getPersistentQPData:o}){const u=I(t,o);return{input:{...k(t),quickPayData:u?{paymentDataRequest:u}:null},isLeanFragment:n}},e.getCheckoutQueryVariable=function({checkoutId:t,confirmationCodeOverride:n,isCompact:o,isLeanFragment:u,location:l,orderId:p,persistentQueryMetadata:f,getPersistentQPData:b}){const h={...(0,c.coerceStaysCheckoutParams)((0,s.default)(l.search)),checkoutId:t,isCompact:o,persistentQueryMetadata:f};n&&(h.code=n);p&&(h.orderId=p);const y=I(h,b);return{input:{...k(h),quickPayData:y?{paymentDataRequest:y}:null},isLeanFragment:u}},e.reportStaysCheckoutInputError=function(t,u){var s;const{bookingAttemptId:c,confirmationCode:l,productId:p,quickPayData:f}=t,I={hasBookingAttemptId:!!c,hasConfirmationCode:!!l,hasProductId:!!p,hasQuickPayData:!!f,origin:u};(0,n.airdogCount)('stays_checkout.api.input_error',1,I);const b=null===(s=window.location)||void 0===s?void 0:s.search;(0,o.reportError)(new Error('[Checkout][Stays] Checkout API Input Error'),{extra:{...t,origin:u,search:b}})};var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=babelHelpers.interopRequireDefault(r(d[3])),s=babelHelpers.interopRequireDefault(r(d[4])),c=r(d[5]),l=r(d[6]),p=r(d[7]),f=r(d[8]);function I(t,n){const o=n();if(null===o)return null;const u=JSON.parse(o);(0,l.shouldYieldSelectedPaymentOption)(u,t)&&u.payment_options_info&&(u.payment_options_info.selected_payment_option=void 0);const s=(0,p.convertToStableObjectOrder)(u);return JSON.stringify(s)}function b(t){return t&&f.airbnbOrgGuestTypes.includes(t)?t:void 0}function h({focusedListing:n,checkin:o,checkout:u,code:s,otherCheckin:c,otherCheckout:l,otherCode:p,otherListing:f,productId:I,splitStaysId:b}){if(!(f&&void 0!==n&&c&&l&&b))return;const h={checkinDate:o,checkoutDate:u,confirmationCode:s,productId:I?(0,t.createGlobalId)('StayListing',I):null},y={checkinDate:c,checkoutDate:l,confirmationCode:p,productId:f?(0,t.createGlobalId)('StayListing',f):null};return{splitStaysId:b,stays:0===n?[h,y]:[y,h]}}const y=()=>['LAUNCH_LOGIN_PHONE_AUTH'];function k(n){const{addOnType:o,affiliateId:s,airbnbOrgGuestType:c,airbnbOrgResponseId:l,bookingAttemptId:p,causeId:f,checkin:I,checkout:k,code:C,couponCode:O,disasterId:P,guestCheckinTime:v,guestCurrency:D,insuranceCode:S,isFapiaoRequired:T,isLrBooking:_,isWorkTrip:L,luxuryListingQuoteId:A,numberOfAdults:N,numberOfChildren:G,numberOfInfants:q,numberOfInstallments:F,numberOfPets:Q,openHomesAffiliated:R,orderId:E,pendingGuestEmail:H,pendingGuestId:M,pendingTripToken:w,persistentQueryMetadata:x,photoId:B,productId:j,ratePlanId:J,selectedCancellationPolicyId:U,specialOfferId:V}=n,{entryPoint:W}=x,Y=u.default.current().curr;return{businessTravel:{pendingGuestEmail:H,pendingGuestId:M,pendingTripToken:w,workTrip:L},bookingAttemptId:p,checkinDate:I,checkoutDate:k,splitStays:h(n),confirmationCode:C,couponCode:O,guestCheckinTime:v,guestCounts:{numberOfAdults:Number(N)||1,numberOfChildren:Number(G)||0,numberOfInfants:Number(q)||0,numberOfPets:Number(Q)||0},guestCurrencyOverride:D||Y||null,insuranceCode:S,listingDetail:{photoId:B},lux:{isLrBooking:_,luxuryListingQuoteId:A},metadata:{entryPoint:W,internalFlags:y()},numberOfInstallments:F,org:{affiliateId:s?String(s):void 0,causeId:Number(f)||void 0,disasterId:Number(P)||void 0,airbnbOrgGuestType:b(c),airbnbOrgResponseId:void 0!==l?String(l):void 0,openHomesAffiliated:!!R||void 0},orderId:E,productId:j?(0,t.createGlobalId)('StayListing',j):null,ratePlanId:J,selectedCancellationPolicyId:U,specialOfferId:V,china:{isFapiaoRequired:T},addOn:{carbonOffsetParams:{isSelected:'CARBON_OFFSET'===o}}}}}),"0f60a4",["56afe0","3e4681","f2f40f","06a99e","a7c4ef","261c30","9f33eb","735391","dc9188"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return t.default.get('exploreTreatments')||[]};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"23c701",["0a58da"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParamKeys=void 0,e.buildUrlInfo=function(t,n){return{urlParams:t.params,queryParams:f((0,p.default)(n.search)),location:n}},e.coerceStaysCheckoutParams=f;var t,n,o,s,u,c,p=babelHelpers.interopRequireDefault(r(d[0]));!(function(t){t.debug="debug",t.is_lr_booking="isLrBooking",t.isLrBooking="isLrBooking",t.work_trip="isWorkTrip",t.is_work_trip="isWorkTrip",t.isWorkTrip="isWorkTrip",t.isFapiaoRequired="isFapiaoRequired",t.open_homes_affiliated="openHomesAffiliated",t.openHomesAffiliated="openHomesAffiliated",t.remove_coupon_action="removeCouponAction",t.removeCouponAction="removeCouponAction",t.skip_coupon_auto_apply="skipCouponAutoApply",t.skipCouponAutoApply="skipCouponAutoApply",t.typed_payments="typedPayments",t.typedPayments="typedPayments",t.vacation_rental="vacationRental",t.vacationRental="vacationRental",t.is_pending_payment="isWaitToPay",t.isWaitToPay="isWaitToPay"})(t||(t={})),(function(t){t.affiliate_id="affiliateId",t.affiliateId="affiliateId",t.airbnb_org_guest_type="airbnbOrgGuestType",t.airbnbOrgGuestType="airbnbOrgGuestType",t.booking_attempt_id="bookingAttemptId",t.bookingAttemptId="bookingAttemptId",t.campaign_param="campaignParam",t.campaignParam="campaignParam",t.code="code",t.otherCode="otherCode",t.other_code="otherCode",t.orderId="orderId",t.coupon_code="couponCode",t.couponCode="couponCode",t.display_currency="guestCurrency",t.displayCurrency="guestCurrency",t.guest_currency="guestCurrency",t.guestCurrency="guestCurrency",t.partnership_external_id="partnershipExternalId",t.partnershipExternalId="partnershipExternalId",t.pendingGuestEmail="pendingGuestEmail",t.pendingTripToken="pendingTripToken",t.ratePlanId="ratePlanId"})(n||(n={})),(function(t){t.cause_id="causeId",t.causeId="causeId",t.disaster_id="disasterId",t.disasterId="disasterId",t.airbnb_org_response_id="airbnbOrgResponseId",t.airbnbOrgResponseId="airbnbOrgResponseId",t.guest_checkin_time="guestCheckinTime",t.guestCheckinTime="guestCheckinTime",t.adults="numberOfAdults",t.number_of_adults="numberOfAdults",t.numberOfAdults="numberOfAdults",t.children="numberOfChildren",t.number_of_children="numberOfChildren",t.numberOfChildren="numberOfChildren",t.guests="numberOfGuests",t.number_of_guests="numberOfGuests",t.numberOfGuests="numberOfGuests",t.infants="numberOfInfants",t.number_of_infants="numberOfInfants",t.numberOfInfants="numberOfInfants",t.pets="numberOfPets",t.number_of_pets="numberOfPets",t.numberOfPets="numberOfPets",t.otherAdults="otherAdults",t.other_adults="otherAdults",t.otherChildren="otherChildren",t.other_children="otherChildren",t.otherGuests="otherGuests",t.other_guests="otherGuests",t.otherInfants="otherInfants",t.other_infants="otherInfants",t.otherPets="otherPets",t.other_pets="otherPets",t.selected_cancellation_policy_id="selectedCancellationPolicyId",t.selectedCancellationPolicyId="selectedCancellationPolicyId",t.focusedListing="focusedListing",t.focused_listing="focusedListing",t.fov_flow_canceled="fovFlowCanceled",t.fovFlowCanceled="fovFlowCanceled"})(o||(o={})),(function(t){t.guest_id="guestId",t.guestId="guestId",t.luxury_listing_quote_id="luxuryListingQuoteId",t.luxuryListingQuoteId="luxuryListingQuoteId",t.number_of_installments="numberOfInstallments",t.numberOfInstallments="numberOfInstallments",t.pending_traveler_id="pendingTravelerId",t.pendingTravelerId="pendingTravelerId",t.pending_guest_id="pendingGuestId",t.pendingGuestId="pendingGuestId",t.insuranceCode="insuranceCode",t.addOnType="addOnType",t.product_id="productId",t.productId="productId",t.hosting_id="productId",t.otherListing="otherListing",t.other_listing="otherListing",t.security_deposit_id="securityDepositId",t.securityDepositId="securityDepositId",t.special_offer_id="specialOfferId",t.specialOfferId="specialOfferId",t.splitStaysId="splitStaysId",t.split_stays_id="splitStaysId",t.photoId="photoId"})(s||(s={})),(function(t){t.checkin="checkin",t.checkout="checkout",t.check_in="checkin",t.check_out="checkout",t.otherCheckin="otherCheckin",t.other_check_in="otherCheckin",t.otherCheckout="otherCheckout",t.other_check_out="otherCheckout"})(u||(u={})),(function(t){t.sectionIds="sectionIds"})(c||(c={}));const l={...t,...n,...o,...s,...u,...c};function f(u,c=!1,p=!1){return Object.entries(u).reduce(((u,[f,_])=>{if(p&&void 0===_)return u;const h=l[f];return h?t[f]?''!==_&&'string'==typeof _?{...u,[h]:'true'===_}:'boolean'==typeof _?{...u,[h]:_}:u:o[f]?''===_||'string'!=typeof _||Number.isNaN(parseInt(_,10))?''!==_&&'number'==typeof _?{...u,[h]:_}:u:{...u,[h]:parseInt(_,10)}:s[f]?''!==_&&void 0!==_?{...u,[h]:String(_)}:u:''!==_||f===n.couponCode||f===n.coupon_code?{...u,[h]:_}:u:c?{...u,[f]:_}:u}),{})}e.QueryParamKeys=l}),"261c30",["a7c4ef"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({buildEventDataFromProps:b,eventDataSchema:D,trackReplaceNavigationsToNewPathnames:I=!1,universalPageName:w,subPageName:S,deprecatedIgnorePathnameUpdateForImpressions:E,ignorePathnameUpdate:R,includeHistoryUpdate:C}){if(b&&!D)throw new Error('withPagePerformanceScore: You must supply an event data schema if you supply an event data function.');return function(T){class A extends t.Component{constructor(t){super(t),this.bootstrappedApiLoggingContext=void 0,this.evaluatedEventDataSchema=void 0,this.evaluatedUniversalPageName=void 0,this.evaluatedSubPageName=void 0,this.eventDataSchema=void 0,this.impressionUuid=void 0,this.isInPageTransition=void 0,this.pageTransitionAcknowledgedByRender=void 0,this.previousPathname=void 0,this.lastLoggedPathname=void 0,this.deprecatedIgnorePathnameUpdateForImpressions=void 0,this.timeout=void 0,this.timestampOfInteractivity=void 0,this.ttfcpRequestAnimationFrameId=void 0,this.ignorePathnameUpdate=void 0,this.includeHistoryUpdate=void 0,this.getEvaluatedUniversalPageNames=()=>({evaluatedUniversalPageName:(0,P.evaluateUniversalPageName)(w,this.props),evaluatedSubPageName:S&&(0,P.evaluateSubpageName)(S,this.props)}),this.shouldSkipImpressionLogging=()=>{const{history:t}=this.props;return'function'==typeof this.deprecatedIgnorePathnameUpdateForImpressions&&t&&t.location&&this.lastLoggedPathname&&this.deprecatedIgnorePathnameUpdateForImpressions({prevPathname:this.lastLoggedPathname,nextPathname:t.location.pathname})},this.handleNewPageMount=()=>{const{history:t}=this.props,n=(0,v.updateJitneyClientSession)();h.default.addContext({client_session_id:n}),(0,u.storePageName)(window.document.URL,this.evaluatedUniversalPageName);const s=this.generateEventData();this.shouldSkipImpressionLogging()||(h.default.setImpressionMetadata({eventDataSchema:this.evaluatedEventDataSchema,initialEventData:s,impressionUuid:this.impressionUuid}),c.default.logImpression({universalPageName:this.evaluatedUniversalPageName,eventData:s,eventDataSchema:this.evaluatedEventDataSchema,impressionUuid:this.impressionUuid}),this.lastLoggedPathname=t&&t.location&&t.location.pathname),t&&c.default.setHistoryListener(t,((t,n)=>{if(c.default.hasMovedToNewPage(t,n,I)){if(this.pageTransitionAcknowledgedByRender)return void(this.pageTransitionAcknowledgedByRender=!1);this.isInPageTransition=!0}else(0,u.storePageName)(window.document.URL,this.evaluatedUniversalPageName)})),this.ttfcpRequestAnimationFrameId=requestAnimationFrame((()=>{const t={universalPageName:this.evaluatedUniversalPageName,subPageName:this.evaluatedSubPageName,impressionUuid:this.impressionUuid,timestampOfFCP:(0,l.default)().now(),eventData:s,eventDataSchema:this.evaluatedEventDataSchema};U.default.updateCurrentRecorderWithHOCProps(t)})),'function'==typeof this.ignorePathnameUpdate&&U.default.setIgnorePathnameUpdate(this.ignorePathnameUpdate),'function'==typeof this.includeHistoryUpdate&&U.default.setIncludeHistoryUpdate(this.includeHistoryUpdate)},this.eventDataSchema=D;const{evaluatedUniversalPageName:p,evaluatedSubPageName:f}=this.getEvaluatedUniversalPageNames();this.evaluatedUniversalPageName=p,this.evaluatedSubPageName=f,this.evaluatedEventDataSchema=(0,P.evaluateEventDataSchema)(D,t),this.isInPageTransition=!1,this.timestampOfInteractivity=null,this.previousPathname=t.location&&t.location.pathname,this.pageTransitionAcknowledgedByRender=!1,this.impressionUuid=(0,n().v4)();const N=o.default.get('api_logging_context');if(this.bootstrappedApiLoggingContext=void 0,this.deprecatedIgnorePathnameUpdateForImpressions=E,this.ignorePathnameUpdate=R,this.includeHistoryUpdate=C,N)try{'object'==typeof N?this.bootstrappedApiLoggingContext=N:'string'==typeof N&&(this.bootstrappedApiLoggingContext=JSON.parse(N))}catch(t){h.default.logJitneyEvent({schema:s().ApiLoggingContextMalformedBootstrapDataEvent,event_data:{payload:N,impression_uuid:this.impressionUuid}})}this.handlePageTransition=this.handlePageTransition.bind(this),this.generateEventData=this.generateEventData.bind(this),this.setContextForPage=this.setContextForPage.bind(this),this.setContextForPage()}componentDidMount(){window.performance&&'function'==typeof window.performance.mark&&window.performance.mark(f.HYDRATE_PERFORMANCE_HOC_MARK),this.handleNewPageMount()}componentWillUnmount(){this.timeout&&window.clearTimeout(this.timeout),this.ttfcpRequestAnimationFrameId&&cancelAnimationFrame(this.ttfcpRequestAnimationFrameId),U.default.clearIgnorePathnameUpdate(),U.default.clearIncludeHistoryUpdate()}setContextForPage(){(0,p.setPageName)(this.evaluatedUniversalPageName),h.default.addContext({page_name:this.evaluatedUniversalPageName,impression_uuid:this.impressionUuid}),y&&h.default.addContext({previous_page_name:y}),y=this.evaluatedUniversalPageName}handlePageTransition(){this.isInPageTransition=!1,this.previousPathname=this.props.location&&this.props.location.pathname,this.timestampOfInteractivity=null;const{evaluatedUniversalPageName:t,evaluatedSubPageName:s}=this.getEvaluatedUniversalPageNames();this.evaluatedUniversalPageName=t,this.evaluatedSubPageName=s,this.evaluatedEventDataSchema=(0,P.evaluateEventDataSchema)(D,this.props),this.impressionUuid=(0,n().v4)(),this.setContextForPage(),h.default.setImpressionMetadata({eventDataSchema:this.evaluatedEventDataSchema,initialEventData:this.generateEventData(),impressionUuid:this.impressionUuid}),this.handleNewPageMount()}generateEventData(){const t=b&&b(this.props);return!(!t&&!this.bootstrappedApiLoggingContext)&&{...t,...this.bootstrappedApiLoggingContext}}render(){const{history:t,location:n}=this.props;return this.isInPageTransition&&this.handlePageTransition(),n&&t&&this.previousPathname!==n.pathname&&(this.previousPathname=n.pathname,c.default.hasMovedToNewPage(n,t.action,I)?(this.handlePageTransition(),this.pageTransitionAcknowledgedByRender=!0):(0,u.storePageName)(window.document.URL,this.evaluatedUniversalPageName)),(0,N.jsx)(T,{...this.props})}}return A.propTypes={...T.propTypes||{}},A.defaultProps={...T.defaultProps||{}},A.displayName=`withPagePerformanceScore(${T.displayName||T.name||'Component'})`,A}};var t=babelHelpers.interopRequireWildcard(r(d[0]));function n(){const t=r(d[1]);return n=function(){return t},t}function s(){const t=r(d[2]);return s=function(){return t},t}babelHelpers.interopRequireDefault(r(d[3]));var o=babelHelpers.interopRequireDefault(r(d[4])),h=babelHelpers.interopRequireDefault(r(d[5])),p=r(d[6]),u=r(d[7]),l=babelHelpers.interopRequireDefault(r(d[8])),v=r(d[9]),c=babelHelpers.interopRequireDefault(r(d[10])),P=r(d[11]),f=r(d[12]),U=babelHelpers.interopRequireDefault(r(d[13])),N=r(d[14]);let y}),"3a6fa9",["a27fc3","305dd5","de621c","29c0a5","0a58da","c8b97a","33392f","861735","5d602b","82f976","007d44","f85727","364f02","5c13fa","14def0"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o,e.replaceToHistory=function(t,s={}){o((0,n.getHistory)(),t,s)};var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]);function o(n,o,{maintainScrollPosition:s=!1,maintainQueryParams:l=!1,maintainHash:u=!1,params:c,state:f}={}){const p=(0,t.default)(o,{maintainQueryParams:l,maintainHash:u,params:c});n.replace(p,f),g.window&&!s&&g.window.scrollTo(0,0)}}),"4ee5a9",["be6a20","7934b6"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,l=(0,n.default)()){const{treatmentName:f}=(0,t.default)(u,l)||{};return f||'treatment_unknown'};var t=babelHelpers.interopRequireDefault(r(d[0])),n=babelHelpers.interopRequireDefault(r(d[1]))}),"52449d",["9439c5","23c701"]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(n){return window.btoa(n)}function t(n,t){return`${n}:${encodeURIComponent(t).replace(/%20/g,'+').replace(/\(/g,'%28').replace(/\)/g,'%29')}`}function o(n){const t=n.split(':'),[o,c]=t,l=c&&decodeURIComponent(c.replace(/\+/g,'%20').replace(/%28/g,'(').replace(/%29/g,')'));if(void 0===o||void 0===l)throw new Error('Failed to decode global ID');return{typename:o,internalId:l}}Object.defineProperty(e,"__esModule",{value:!0}),e.createGlobalId=function(o,c){return n(t(o,c))},e.getInternalId=function(n){const{internalId:t}=o((c=n,window.atob(c)));var c;return t},e.parseGlobalId=function(n){return n},e.stringifyGlobalId=function(n){return n}}),"56afe0",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateCache=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]);const o=(t,o)=>{if(o&&null!=t&&t.paymentDataRequest){const u=JSON.parse(t.paymentDataRequest),l=JSON.stringify((0,n.convertToStableObjectOrder)({...u,bill_info:{...null==u?void 0:u.bill_info,bill_item_product_id:o}}));return{...t,paymentDataRequest:l}}return t};e.updateCache=({isLeanFragment:n,proxy:u,stayCheckout:l,variables:s})=>{var c,p,v;const y=(null==l||null===(c=l.sections)||void 0===c||null===(p=c.metadata)||void 0===p?void 0:p.confirmationCode)||void 0,_=o(null==s||null===(v=s.input)||void 0===v?void 0:v.quickPayData,y),b={input:{...s.input,confirmationCode:y,quickPayData:_},isLeanFragment:n};u.writeQuery({query:t.default,variables:b,data:{presentation:{__typename:'RootPresentationContainer',stayCheckout:l}}})}}),"5c0dc9",["db1041","735391"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertToStableObjectOrder=function t(o){if(Array.isArray(o))return o.map((o=>t(o)));if('object'==typeof o&&null!==o){const n=o;return'function'==typeof n.toJSON?t(n.toJSON()):Object.keys(o).sort().reduce(((n,c)=>(n[c]=t(o[c]),n)),{})}return o}}),"735391",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCheckoutPrepareMutationVariables=e.default=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),u=r(d[1]),o=r(d[2]),n=babelHelpers.interopRequireDefault(r(d[3])),s=r(d[4]),c=babelHelpers.interopRequireDefault(r(d[5])),l=r(d[6]);const p=({params:t,isCompact:u,isLeanFragment:o})=>(0,l.getCheckoutMutationVariable)({input:{...t,checkoutId:null,isCompact:u,persistentQueryMetadata:{}},isLeanFragment:o,getPersistentQPData:()=>null});e.getCheckoutPrepareMutationVariables=p;var C=({cookie:C,exploreTreatments:f,isPrefetch:b,location:h,loadQuery:R})=>{const{search:_}=h,F=(0,o.coerceStaysCheckoutParams)((0,t.default)(_)),k=C(u.FORM_FACTOR_COOKIE)===u.FORM_FACTOR.COMPACT,y='treatment'===(0,n.default)(s.CHECKOUT_LEAN_FRAGMENT_ERF,f),M=p({params:F,isCompact:k,isLeanFragment:y}),O=b?{headers:{'X-Airbnb-Prefetch':'web'}}:void 0,{input:P}=M,{productId:v}=P;if(!v){const t=b?'StaysCheckoutCreateRoute.prepare.prefetch_mutation':'StaysCheckoutCreateRoute.prepare_mutation';(0,l.reportStaysCheckoutInputError)(P,t)}return{isLeanFragment:y,queryRef:R({context:O,query:c.default,variables:M})}};e.default=C}),"80cc43",["a7c4ef","b679e8","261c30","52449d","e320b6","db1041","0f60a4"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.updateJitneyClientSession=function(){const t=(new Date).getTime()/1e3;c(t)?l(t):u(t);return _};var n=r(d[1]),o=r(d[2]);let s=0,_=null;function c(t){if(t-s<1800)return!0;const o=(0,n.getCookie)('jitney_client_session_id'),c=(0,n.getCookie)('jitney_client_session_created_at'),u=(0,n.getCookie)('jitney_client_session_updated_at');return _=o,o&&c&&u&&t-parseInt(c,10)<86400&&t-parseInt(u,10)<1800}function u(c){const u=(0,o.getCookieHost)(),l=(0,t().v4)();(0,n.setCookie)('jitney_client_session_id',l,{path:"/",domain:u}),(0,n.setCookie)('jitney_client_session_created_at',c,{path:"/",domain:u}),(0,n.setCookie)('jitney_client_session_updated_at',c,{path:"/",domain:u}),s=c,_=l}function l(t){requestIdleCallback((()=>{(0,n.setCookie)('jitney_client_session_updated_at',t,{path:'/',domain:(0,o.getCookieHost)()})})),s=t}}),"82f976",["305dd5","e7272f","5b85ba"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPageName=function(n){return p=h(n),f(p)||(0,t.default)(o+p);var p},e.storePageName=function(s,c){const u=h(s),l=f(u);if(!l)try{(0,t.default)(o+u,c,{expires:p})}catch(t){const o=t instanceof Error?t:new Error(String(t));(0,n.reportError)(o,{extra:{fromJitneyCache:!0,pageName:l},originalError:t instanceof Error?t:void 0})}};var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]);const o='jitney_page_name_',p=36e5,s='[/#?]?$',c='[^/#?]+?',u=[{path:new RegExp(`/experiences/${c}${s}`),pageName:3003},{path:new RegExp(`/rooms/plus/${c}${s}`),pageName:3001},{path:new RegExp(`/rooms/${c}${s}`),pageName:3e3},{path:new RegExp(`/s/guidebooks${s}`),pageName:1006},{path:new RegExp(`/s/${c}${s}`),pageName:2e3}];function f(t){const n=u.find((({path:n})=>{const o=t.match(n);return o&&o[0]===t}));return n?n.pageName:null}function h(t){const{pathname:n}=new URL(t,'https://airbnb.com');return n}}),"861735",["1f339e","f2f40f"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.mutateSearchWithParams=q;var t=babelHelpers.interopRequireWildcard(r(d[0])),o=r(d[1]),u=babelHelpers.interopRequireDefault(r(d[2])),s=babelHelpers.interopRequireDefault(r(d[3])),n=babelHelpers.interopRequireDefault(r(d[4])),l=r(d[5]),c=babelHelpers.interopRequireDefault(r(d[6])),f=babelHelpers.interopRequireWildcard(r(d[7])),p=r(d[8]),y=r(d[9]),b=babelHelpers.interopRequireDefault(r(d[10])),v=r(d[11]),h=r(d[12]);function C(){const t=r(d[13]);return C=function(){return t},t}var _=r(d[14]),k=r(d[15]),O=babelHelpers.interopRequireDefault(r(d[16])),R=r(d[17]),H=r(d[18]);function q({confirmationCode:t,orderId:u,params:n,staysData:l}){const c=s.default.current().curr,{numberOfGuests:f,guestCurrency:p}=n,y={...n,code:t,orderId:u,guestCurrency:p||c||void 0},b=!(void 0!==f||!l);if(!(0,v.isCheckoutStateRecoveryKillswitchOn)()&&b){const{numberOfAdults:t,numberOfChildren:u,numberOfGuests:s,numberOfInfants:n,numberOfPets:c}=l||{},f={numberOfAdults:null!=t?t:void 0,numberOfChildren:null!=u?u:void 0,numberOfGuests:null!=s?s:void 0,numberOfInfants:null!=n?n:void 0,numberOfPets:null!=c?c:void 0,...y};return(0,h.warn)('[Checkout][Stays] create route recovery flow triggered',{extra:{updatedParams:y,staysData:l}}),`?${(0,o.stringify)(f)}`}return`?${(0,o.stringify)(y)}`}var P=(0,b.default)({universalPageName:4003,includeHistoryUpdate:()=>!1})((({location:b,queryRef:h,isLeanFragment:P})=>{const D=(0,C().useNiobeMinimalistClient)(),{search:I}=b,$=(0,t.useMemo)((()=>(0,y.coerceStaysCheckoutParams)((0,n.default)(I))),[I]),{productId:M}=$,S=(0,f.default)()===f.FORM_FACTOR.COMPACT,{data:F,error:T}=(0,C().useMinimalistPreloadedQuery)({query:O.default,queryRef:h});return M||(0,k.reportStaysCheckoutInputError)($,'StaysCheckoutCreateRoute_mutation'),(0,t.useEffect)((()=>{(0,p.airdogCount)('checkout.stays.route.first_render',1,{has_data:!!F,route:'stays_create_route',is_compact:S,checkout_prefetch_on_hover_v2:S?'compact':u.default.findTreatment('checkout_prefetch_on_hover_v2',{log:!1})}),s.default.isLoggedIn()||(0,v.shouldPrefetchLoggedOutStaysCheckout)({isCompact:S,log:!0,source:'stays_create_route'})}),[]),(0,t.useEffect)((()=>{var t;if(null!=F&&null!==(t=F.presentation)&&void 0!==t&&t.stayCheckout){var u,s,n,c,f;const{stayCheckout:t}=F.presentation,o=(null===(u=t.sections)||void 0===u||null===(s=u.metadata)||void 0===s?void 0:s.orderId)||void 0,p=q({confirmationCode:(null===(n=t.sections)||void 0===n||null===(c=n.metadata)||void 0===c?void 0:c.confirmationCode)||void 0,orderId:o,params:$,staysData:(null===(f=t.sections)||void 0===f?void 0:f.stateMutation)||void 0}),y=(0,_.getCheckoutPrepareMutationVariables)({params:{...$,orderId:o},isCompact:S,isLeanFragment:P});(0,R.updateCache)({isLeanFragment:P,proxy:D,stayCheckout:t,variables:y}),(0,l.replaceToHistory)(`/book/stays/${M}${p}`)}else if(T){(0,p.airdogCount)('stays_checkout.create_route.error',1);const t=`?${(0,o.stringify)($)}`;(0,l.replaceToHistory)(`/book/stays/${M}${t}`)}else if(!(0,v.shouldCreateRouteWaitForData)()){(0,p.airdogCount)('stays_checkout.create_route.missing_data');const t=`?${(0,o.stringify)($)}`;(0,l.replaceToHistory)(`/book/stays/${M}${t}`)}}),[F,T,S,M,$,P,D]),(0,H.jsx)(c.default,{})}));e.default=P}),"8c3699",["a27fc3","e950a3","dcc72a","06a99e","a7c4ef","4ee5a9","e3425f","e0b071","3e4681","261c30","3a6fa9","964019","f2f40f","068abc","80cc43","0f60a4","db1041","5c0dc9","14def0"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,n=(0,t.default)()){return n.find((({experiment:t})=>t===u))};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"9439c5",["23c701"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCheckoutStateRecoveryKillswitchOn=function(){return t.default.getBootstrap('checkout_state_recovery_killswitch')},e.shouldCreateRouteWaitForData=void 0,e.shouldPrefetchCheckout=function(){return t.default.getBootstrap('checkout_gp_migration_prefetch_web')},e.shouldPrefetchLoggedOutStaysCheckout=function({isCompact:t,log:o,source:c}){const s=_.default.findTreatment('checkout_disable_prefetch_logged_out_web',{log:o});return(0,u.airdogCount)('checkout.stays.desktop.disable_prefetch_logged_out',1,{source:c,checkout_disable_prefetch_logged_out_web:s,compact:t}),'treatment'!==s},e.shouldShowFirstMessagePrompt=function({deliverExperiment:_,isCompact:u}){if(t.default.getBootstrap('checkout_first_message_prompt_force_in'))return!0;if(u){if(t.default.getBootstrap('checkout_first_message_prompt_moweb_v1'))return _?o.default.deliverExperiment('checkout_first_message_prompt_moweb_v1',{treatment:()=>!0,control:()=>!1,treatment_unknown:()=>!1}):'treatment'===o.default.findTreatmentWithoutLogging('checkout_first_message_prompt_moweb_v1')}else if(t.default.getBootstrap('checkout_first_message_prompt_web_v1'))return _?o.default.deliverExperiment('checkout_first_message_prompt_web_v1',{treatment:()=>!0,control:()=>!1,treatment_unknown:()=>!1}):'treatment'===o.default.findTreatmentWithoutLogging('checkout_first_message_prompt_web_v1');return!1},e.shouldUrlCacheOrderId=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),o=babelHelpers.interopRequireDefault(r(d[1])),_=babelHelpers.interopRequireDefault(r(d[2])),u=r(d[3]);e.shouldUrlCacheOrderId=()=>t.default.getBootstrap('checkout_p4_order_id_url_cache_enabled');e.shouldCreateRouteWaitForData=()=>t.default.getBootstrap('checkout_create_route_wait_for_data_enabled')}),"964019",["c235f8","fc0842","dcc72a","3e4681"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldYieldSelectedPaymentOption=void 0;var t=babelHelpers.interopRequireDefault(r(d[0]));e.shouldYieldSelectedPaymentOption=(l,n)=>{const{isWorkTrip:o,openHomesAffiliated:s}=n,{id:u}=t.default.current(),{user_id:_,bill_info:{is_business_travel:c}}=l;return!!(!c&&o||!c&&s||_!==u)}}),"9f33eb",["06a99e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={document:void 0,getDocument:()=>r(d[1])(d[0]).then(babelHelpers.interopRequireWildcard).then((t=>t.default)),name:'stayCheckout',type:'query',operationId:'2990be3aba36dd5de2ca2c4980f2049b35b976e5c31ac06c1a943fe77ea29a0a'};e.default=t}),"db1041",["9f920f","c592d7"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.airbnbOrgGuestTypes=void 0;e.airbnbOrgGuestTypes=["CLIENT","ORGANIZATION_MEMBER","SELF"]}),"dc9188",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApiLoggingContextMalformedBootstrapDataEvent=void 0;var t={defaultProps:{schema:'com.airbnb.jitney.event.logging.ApiLoggingContext:ApiLoggingContextMalformedBootstrapDataEvent:1.0.0',event_name:'apiloggingcontext_malformed_bootstrap_data'},propTypes:{}};e.ApiLoggingContextMalformedBootstrapDataEvent=t,t.fullyQualifiedName='ApiLoggingContext.v1.ApiLoggingContextMalformedBootstrapDataEvent'}),"de621c",[]);
__d((function(g,r,i,a,m,e,d){"use strict";let _;Object.defineProperty(e,"__esModule",{value:!0}),e.STAYS_HOME_URL=e.SPLIT_STAYS_TITLE_FADE_END_OFFSET=e.CHECKOUT_LEAN_FRAGMENT_ERF=e.BillingType=void 0,e.BillingType=_,(function(_){_.RESERVATION="Reservation2",_.TRIP="MtTrip",_.FIXED_AMOUNT_DONATION="FixedAmountDonation",_.CLAIM_GUEST_TO_HOST="ClaimGuestToHost"})(_||(e.BillingType=_={}));e.SPLIT_STAYS_TITLE_FADE_END_OFFSET=72;e.STAYS_HOME_URL='/s/homes';e.CHECKOUT_LEAN_FRAGMENT_ERF='checkout_lean_section_fragments_v6'}),"e320b6",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.evaluateEventDataSchema=function(t,n){if('object'==typeof t)return t;if('function'==typeof t){const u=t(n);if('object'!=typeof u&&void 0!==u)return;return u}return},e.evaluateSubpageName=function(t,n){if('function'==typeof t){return t(n)}return t},e.evaluateUniversalPageName=function(t,n){if('function'==typeof t){return t(n)}return t}}),"f85727",[]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/gp-stays-checkout-route/routes/StaysCheckoutRoute/StaysCheckoutCreateRoute.90ef711d41.js.map